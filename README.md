# Приложение для работы с базой данных SQLite 24.06.2024
## В приложении реализованы классы и методы для реализации взаимодействия с [базой данных SQLite](Real_Estate_WindowsForms/bin/Debug/DB/Real_Estate.db). Реализованное решение для взаимодействия с БД может лекго дополняться и изменяться благодаря универсальному подходу.
### Технологии для разработки пользовательского приложения и базы данных
Для проекта выбран такой интерфейс программирования приложений, как Windows Forms — это платформа пользовательского интерфейса для создания классических приложений Windows.

Выбор SQLite обусловлен его простотой, легкостью переносимости данных и полной поддержкой стандартного SQL, что идеально подходит для создания программы информационной системы.

### Концептуальная, логическая и физическая модели данных
![image](https://github.com/DmitryZSer/Real_Estate_WindowsForms_SQLite/assets/128312523/de7c9187-5640-478c-9b8b-f6ada80089f4)

![image](https://github.com/DmitryZSer/Real_Estate_WindowsForms_SQLite/assets/128312523/73f9a596-4cb6-41c3-a76f-b92f535d01f2)

![image](https://github.com/DmitryZSer/Real_Estate_WindowsForms_SQLite/assets/128312523/a80cd8f4-3698-40d0-920f-f6ca6a3f90c6)

### Описание реализованных классов 

1. [PasswordHelper](Real_Estate_WindowsForms/PasswordHelper.cs) — класс для хэширования и дехэширования текстового значения для системы авторизации и регистрации пользователей.
2. [FieldValidator](Real_Estate_WindowsForms/FieldValidator.cs) — класс для проверки введенных значений в тектовые поля и работы с ними в целом.
3. [SQLiteHelper](Real_Estate_WindowsForms/SQLiteHelper.cs) — класс для выполнения различных запросов к базе данных. При инициализации обьекта класса указывается таблица к которой будут выполняться запросы.

### Система разделения ролей

#### При запуске программы всплывает окно в котором можно авторизоваться или зарегистрироваться.

![image](https://github.com/DmitryZSer/Real_Estate_WindowsForms_SQLite/assets/128312523/97974772-f3b5-43ff-9f14-54a13497eb95)

Если логин авторизованного пользователя — «admin», то при запуске форм с таблицами будет доступно дополнительная панель для взаимодействия с БД: добавления новых записей, редактирования записей, удаления записей.

![image](https://github.com/DmitryZSer/Real_Estate_WindowsForms_SQLite/assets/128312523/edce19e7-3def-4e92-9c93-f7d63bb5a6f7)

Любой другой авторизованный пользователь не получит доступ к админ-панели. Доступен лишь поиск по записям и, в некоторых формах, редактирование некоторых записей.

![image](https://github.com/DmitryZSer/Real_Estate_WindowsForms_SQLite/assets/128312523/6fe965f0-c735-4052-b8d2-c725ebcc21cf)


### Разбор работы кода на примере формы [Deals](Real_Estate_WindowsForms/TablesForms/Deals.cs)
![image](https://github.com/DmitryZSer/Real_Estate_WindowsForms_SQLite/assets/128312523/f298e5e8-79c0-4c85-a3c9-00b86cd56c28)

При загрузке формы подгружаются данные запросом к БД, если нажата галочка на чекбоксе «Отображать текстовые значения», то появляются дополнительные поля со сводных таблиц с текстовыми значениями.

![image](https://github.com/DmitryZSer/Real_Estate_WindowsForms_SQLite/assets/128312523/db4fd034-3eb0-4de4-b1b7-d565bace312d)

Кнопка «Обновить таблицу» — выполняет запрос на получение данных из таблицы и выводит их; «Очистить поля заполнения» — очищает все текстовые поля на форме.

Кнопки поиска выполняют заранее написанный запрос на поиск значения из текстового поля левее её. В случае отсутствия записи с таким значением выведется ошибка.

![image](https://github.com/DmitryZSer/Real_Estate_WindowsForms_SQLite/assets/128312523/e0718fa1-9be2-4b3a-9256-d8dca96b11a4)

![image](https://github.com/DmitryZSer/Real_Estate_WindowsForms_SQLite/assets/128312523/cc8257af-515c-4e82-b252-637556fed08e)

Ниже, на панели администратора, находятся текстовые поля, соответствующие полям таблицы и панель для выбора действия работы с данными таблицы. 
> Для корректной работы кода необходимо называть все поля соответственно названиям столбцов (т.е для столбца Commission в параметр Name текстового поля необходимо написать CommissionTextBox).

При выборе строки в таблице на форме данные из нее автоматически заполняются в соответствующие текстовые поля.

![image](https://github.com/DmitryZSer/Real_Estate_WindowsForms_SQLite/assets/128312523/93df05ac-1faa-4717-9d10-1956e79efa4f)

В панели выбора действия на всех формах представлено 3 пункта:
1. Добавить запись
- При выборе этого действия блокируется поле айди, открываются остальные поля.
- После нажатия на кнопку «Выполнить» последовательно проверяется:
  - заполнены ли все поля;
  - правильно ли заполнено поле с датой и находится ли указанный возраст в диапозоне от 18 до 100 лет;
  - есть ли в таблице c работниками запись с таким кодом, есть ли в таблице c недвижимостью запись с таким кодом;
  - есть ли запись с идентичными значениями.
- Если все условия выполнены и запрос прошел успешно, то запись добавляется в таблицу. Если нет то выводится сообщение о соответствующей ошибке.

2. Изменить запись
- При выборе этого действия открываются все поля.
- После нажатия на кнопку «Выполнить» последовательно проверяются все __заполененные__ поля:
  - правильно ли заполнено поле с датой и находится ли указанный возраст в диапозоне от 18 до 100 лет,
  - есть ли в таблице c работниками запись с таким кодом;
  - есть ли в таблице c недвижимостью запись с таким кодом;
  - __заполнено хотя бы одно поле кроме айди__;
  - есть ли запись с идентичными значениями.
- Если все условия выполнены и запрос прошел успешно, то запись обновляется. Если нет то выводится сообщение о соответствующей ошибке.
  
3. Удалить запись
- При выборе этого действия блокируются все поля, кроме айди.
- После нажатия на кнопку «Выполнить» последовательно проверяется:
  - Заполнено ли текстовое поле или выбрана строка в таблице
  - Есть ли запись с таким айди в таблице
  - *В других таблицах проверяется нет ли записи в другой таблице в качестве вторичного ключа*
- Если все условия выполнены и запрос прошел успешно, то запись удаляется из таблицы. Если нет то выводится сообщение о соответствующей ошибке.

